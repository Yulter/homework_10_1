# Проект "Виджет банковских операций клиентов"
## Описание:
проект "Виджет банковских операций клиентов" - виджет, который показывает несколько последних успешных банковских операций клиента. 
## Установка:
1. Клонируйте репозиторий:
```git@github.com:Yulter/homework_10_1.git```
2. Установите зависимости:
```pip install -r requirements.txt```
3. Создайте базу данных и выполните миграции:
```python manage.py migrate```
4. Запустите локальный сервер:
```python manage.py runserver```
## Использование:

Пакет src содержит следующие модули:
1. masks.py
2. processing.py
3. widget.py
4. generators.py
Содержание модулей и примеры работы функций

masks.py:
def get_mask_card_number() - Функция маскирует номера принимаемых карт

Пример работы функции:

7000792289606361     # входной аргумент

7000 79** **** 6361  # выход функции

def get_mask_account() - Функция маскирует номера принимаемых счетов

Пример работы функции:

73654108430135874305  # входной аргумент

**4305  # выход функции

widget.py
def mask_account_card() - Функция принимает номер карты или счета и маскирует его, в зависимости от принятых данных

Пример работы функции:

# Пример для карты

Visa Platinum 7000792289606361  # входной аргумент

Visa Platinum 7000 79** **** 6361  # выход функции

# Пример для счета

Счет 73654108430135874305  # входной аргумент

Счет **4305  # выход функции

def get_date() - Функция принимает строковые данные содержащие текущую дату и выводит в удобном формате

Пример работы функции:

"2024-03-11T02:26:18.671407" # входной аргумент

"11.03.2024" # выход функции

processing.py
def filter_by_state() - Функция возвращает новый список словарей, содержащий только те словари, у которых ключ state соответствует указанному значению

Пример работы функции:

# Выход функции со статусом по умолчанию 'EXECUTED'

[{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'}, {'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'}]

# Выход функции, если вторым аргументов передано 'CANCELED'

[{'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'}, {'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'}]

# пример входных данных

[{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'}, {'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'}, {'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'}, {'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'}]

def sort_by_date() - Функция должна возвращать новый список, отсортированный по дате (date)

# Выход функции (сортировка по убыванию, т. е. сначала самые последние операции)

[{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'}, {'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'}, {'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'}, {'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'}]

# Пример входных данных

[{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'}, {'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'}, {'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'}, {'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'}]

processing.py
def filter_by_currency() - Функция, которая принимает на вход список словарей, представляющих транзакции. Функция должна возвращать итератор, который поочередно выдает транзакции, где валюта операции соответствует заданной (например, USD).

# Пример входных данных

         "id": 142264268,
         "state": "EXECUTED",
         "date": "2019-04-04T23:20:05.206878",
         "operationAmount": {
             "amount": "79114.93",
             "currency": {
                 "name": "USD",
                 "code": "USD"
             }
         },
         "description": "Перевод со счета на счет",
         "from": "Счет 19708645243227258542",
         "to": "Счет 75651667383060284188"
     },
     {
         "id": 873106923,
         "state": "EXECUTED",
         "date": "2019-03-23T01:09:46.296404",
         "operationAmount": {
             "amount": "43318.34",
             "currency": {
                 "name": "руб.",
                 "code": "RUB"
             }
         },
         "description": "Перевод со счета на счет",
         "from": "Счет 44812258784861134719",
         "to": "Счет 74489636417521191160"
     },]
def transaction_descriptions() - Функция принимает список словарей с транзакциями и возвращает описание каждой операции по очереди

# Пример входных данных аналогичен как и для фкнции filter_by_currency()

# Пример вывода

Перевод со счета на счет
Перевод со счета на счет
Перевод с карты на карту
Перевод организации

def card_number_generator() - Функция генерирует номера карт в заданном диапазоне и выдаёт в корректном формате

# Пример вывода

4276 4827 7896 2107
4276 4827 7896 2108
4276 4827 7896 2109

## Документация:

Дополнительную информацию о структуре проекта и API можно найти в [документации](docs/README.md).

## Лицензия:

Проект распространяется под [лицензией MIT](LICENSE).

## Тестирование:
1. Для запуска тестов используйте команду:
```pytest```
2. Введите команду:
```pytest --cov=src --cov-report=html```
Чтобы сгенерировать отчет о покрытии в HTML-формате, где src — пакет c модулями, которые тестируем. 
Отчет будет сгенерирован в папке htmlcov и храниться в файле с названием index.html: